{
  "entities": {
    "Participant": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Participant",
      "type": "object",
      "description": "Represents a participant in the LR Manager application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Participant entity."
        },
        "nombre": {
          "type": "string",
          "description": "The participant's full name."
        },
        "dni": {
          "type": "string",
          "description": "The participant's document number."
        },
        "fechaNacimiento": {
          "type": "string",
          "description": "The participant's date of birth.",
          "format": "date"
        },
        "actoAdministrativo": {
          "type": "string",
          "description": "The administrative act number related to the participant (e.g., resolution number)."
        },
        "programa": {
          "type": "string",
          "description": "The program the participant is enrolled in."
        },
        "fechaIngreso": {
          "type": "string",
          "description": "The date the participant joined the program.",
          "format": "date"
        },
        "departamento": {
          "type": "string",
          "description": "The department the participant belongs to."
        },
        "categoria": {
          "type": "string",
          "description": "The category of the participant (e.g., Senior, Estandar, Junior)."
        },
        "lugarTrabajo": {
          "type": "string",
          "description": "The participant's place of work or area."
        },
        "email": {
          "type": "string",
          "description": "The participant's email address.",
          "format": "email"
        },
        "telefono": {
          "type": "string",
          "description": "The participant's phone number."
        },
        "esEquipoTecnico": {
          "type": "boolean",
          "description": "Indicates if the participant is part of the technical team (staff)."
        },
        "pagosAcumulados": {
          "type": "number",
          "description": "The number of payments accumulated by the participant."
        },
        "fechaAlta": {
          "type": "string",
          "description": "The date the participant was registered.",
          "format": "date-time"
        },
        "activo": {
          "type": "boolean",
          "description": "Indicates if the participant is currently active."
        },
        "ultimoPago": {
          "type": "string",
          "description": "Date of last payment made to the participant."
        },
        "ownerId": {
          "type": "string",
          "description": "The ID of the user who owns this document."
        }
      },
      "required": [
        "id",
        "nombre",
        "dni",
        "fechaNacimiento",
        "programa",
        "fechaIngreso",
        "departamento"
      ]
    },
    "Payment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Payment",
      "type": "object",
      "description": "Represents a payment made to a participant.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Payment entity."
        },
        "participantId": {
          "type": "string",
          "description": "Reference to Participant. (Relationship: Participant 1:N Payment)"
        },
        "participantName": {
          "type": "string",
          "description": "The name of the participant receiving the payment."
        },
        "dni": {
          "type": "string",
          "description": "The document number of the participant receiving the payment."
        },
        "monto": {
          "type": "number",
          "description": "The amount of the payment."
        },
        "mes": {
          "type": "string",
          "description": "The month the payment corresponds to."
        },
        "anio": {
          "type": "string",
          "description": "The year the payment corresponds to."
        },
        "fechaCarga": {
          "type": "string",
          "description": "The date the payment was uploaded to the system.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "participantId",
        "participantName",
        "dni",
        "monto",
        "mes",
        "anio"
      ]
    },
    "Novedad": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Novedad",
      "type": "object",
      "description": "Represents a piece of news or an update related to a participant.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Novedad entity."
        },
        "participantId": {
          "type": "string",
          "description": "Reference to Participant. (Relationship: Participant 1:N Novedad)"
        },
        "participantName": {
          "type": "string",
          "description": "The name of the participant related to the news."
        },
        "descripcion": {
          "type": "string",
          "description": "The description of the news or update."
        },
        "fecha": {
          "type": "string",
          "description": "The date of the news.",
          "format": "date"
        },
        "fechaRealCarga": {
          "type": "string",
          "description": "The date the news was uploaded to the system.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "participantId",
        "participantName",
        "descripcion",
        "fecha"
      ]
    },
    "UserRole": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserRole",
      "type": "object",
      "description": "Defines a user's role in the application.",
      "properties": {
        "uid": { "type": "string", "description": "The user's unique ID." },
        "email": { "type": "string", "format": "email" },
        "name": { "type": "string" },
        "role": { "type": "string", "enum": ["admin", "data_entry"] },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["uid", "email", "name", "role", "createdAt"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "users/{userId}",
        "definition": {
          "entityName": "UserRole",
          "schema": {
            "$ref": "#/entities/UserRole"
          },
          "description": "Stores user profiles and roles."
        }
      },
      {
        "path": "participants/{participantId}",
        "definition": {
          "entityName": "Participant",
          "schema": {
            "$ref": "#/entities/Participant"
          },
          "description": "Stores participant data."
        }
      },
      {
        "path": "payments/{paymentId}",
        "definition": {
          "entityName": "Payment",
          "schema": {
            "$ref": "#/entities/Payment"
          },
          "description": "Stores payment data."
        }
      },
      {
        "path": "novedades/{novedadId}",
        "definition": {
          "entityName": "Novedad",
          "schema": {
            "$ref": "#/entities/Novedad"
          },
          "description": "Stores news items."
        }
      },
      {
        "path": "config/{configId}",
        "definition": {
          "entityName": "config",
          "schema": {
            "$ref": "#/entities/config"
          },
          "description": "Stores configuration settings."
        }
      }
    ],
    "reasoning": "A simple, flat Firestore structure is used. Each main entity type has its own root-level collection. This is easy to understand, manage, and secure with straightforward rules."
  }
}
