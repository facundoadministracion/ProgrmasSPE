{
  "entities": {
    "Participant": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Participant",
      "type": "object",
      "description": "Represents a participant in the LR Manager application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Participant entity."
        },
        "nombre": {
          "type": "string",
          "description": "The participant's full name."
        },
        "dni": {
          "type": "string",
          "description": "The participant's document number."
        },
        "fechaNacimiento": {
          "type": "string",
          "description": "The participant's date of birth.",
          "format": "date"
        },
        "actoAdministrativo": {
          "type": "string",
          "description": "The administrative act number related to the participant (e.g., resolution number)."
        },
        "programa": {
          "type": "string",
          "description": "The program the participant is enrolled in."
        },
        "fechaIngreso": {
          "type": "string",
          "description": "The date the participant joined the program.",
          "format": "date"
        },
        "departamento": {
          "type": "string",
          "description": "The department the participant belongs to."
        },
        "categoria": {
          "type": "string",
          "description": "The category of the participant (e.g., Senior, Estandar, Junior)."
        },
        "lugarTrabajo": {
          "type": "string",
          "description": "The participant's place of work or area."
        },
        "email": {
          "type": "string",
          "description": "The participant's email address.",
          "format": "email"
        },
        "telefono": {
          "type": "string",
          "description": "The participant's phone number."
        },
        "esEquipoTecnico": {
          "type": "boolean",
          "description": "Indicates if the participant is part of the technical team (staff)."
        },
        "pagosAcumulados": {
          "type": "number",
          "description": "The number of payments accumulated by the participant."
        },
        "fechaAlta": {
          "type": "string",
          "description": "The date the participant was registered.",
          "format": "date-time"
        },
        "activo": {
          "type": "boolean",
          "description": "Indicates if the participant is currently active."
        },
        "ultimoPago": {
          "type": "string",
          "description": "Date of last payment made to the participant."
        },
        "ownerId": {
          "type": "string",
          "description": "The ID of the user who owns this document."
        }
      },
      "required": [
        "id",
        "nombre",
        "dni",
        "fechaNacimiento",
        "programa",
        "fechaIngreso",
        "departamento"
      ]
    },
    "Payment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Payment",
      "type": "object",
      "description": "Represents a payment made to a participant.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Payment entity."
        },
        "participantId": {
          "type": "string",
          "description": "Reference to Participant. (Relationship: Participant 1:N Payment)"
        },
        "participantName": {
          "type": "string",
          "description": "The name of the participant receiving the payment."
        },
        "dni": {
          "type": "string",
          "description": "The document number of the participant receiving the payment."
        },
        "monto": {
          "type": "number",
          "description": "The amount of the payment."
        },
        "mes": {
          "type": "string",
          "description": "The month the payment corresponds to."
        },
        "anio": {
          "type": "string",
          "description": "The year the payment corresponds to."
        },
        "fechaCarga": {
          "type": "string",
          "description": "The date the payment was uploaded to the system.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "participantId",
        "participantName",
        "dni",
        "monto",
        "mes",
        "anio"
      ]
    },
    "Novedad": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Novedad",
      "type": "object",
      "description": "Represents a piece of news or an update related to a participant.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Novedad entity."
        },
        "participantId": {
          "type": "string",
          "description": "Reference to Participant. (Relationship: Participant 1:N Novedad)"
        },
        "participantName": {
          "type": "string",
          "description": "The name of the participant related to the news."
        },
        "descripcion": {
          "type": "string",
          "description": "The description of the news or update."
        },
        "fecha": {
          "type": "string",
          "description": "The date of the news.",
          "format": "date"
        },
        "fechaRealCarga": {
          "type": "string",
          "description": "The date the news was uploaded to the system.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "participantId",
        "participantName",
        "descripcion",
        "fecha"
      ]
    },
    "UserRole": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserRole",
      "type": "object",
      "description": "Defines a user's role in the application.",
      "properties": {
        "uid": { "type": "string", "description": "The user's unique ID." },
        "email": { "type": "string", "format": "email" },
        "name": { "type": "string" },
        "role": { "type": "string", "enum": ["admin", "data_entry"] },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["uid", "email", "name", "role", "createdAt"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "artifacts/{appId}/public/data/users/{userId}",
        "definition": {
          "entityName": "UserRole",
          "schema": {
            "$ref": "#/entities/UserRole"
          },
          "description": "Stores user profiles and roles.",
          "params": [
            { "name": "appId", "description": "The application ID." },
            { "name": "userId", "description": "The user's unique identifier." }
          ]
        }
      },
      {
        "path": "artifacts/{appId}/public/data/participants/{participantId}",
        "definition": {
          "entityName": "Participant",
          "schema": {
            "$ref": "#/entities/Participant"
          },
          "description": "Stores participant data.",
          "params": [
            { "name": "appId", "description": "The application ID." },
            { "name": "participantId", "description": "The unique identifier of the participant." }
          ]
        }
      },
      {
        "path": "artifacts/{appId}/public/data/payments/{paymentId}",
        "definition": {
          "entityName": "Payment",
          "schema": {
            "$ref": "#/entities/Payment"
          },
          "description": "Stores payment data.",
          "params": [
            { "name": "appId", "description": "The application ID." },
            { "name": "paymentId", "description": "The unique identifier of the payment." }
          ]
        }
      },
      {
        "path": "artifacts/{appId}/public/data/novedades/{novedadId}",
        "definition": {
          "entityName": "Novedad",
          "schema": {
            "$ref": "#/entities/Novedad"
          },
          "description": "Stores news items.",
          "params": [
            { "name": "appId", "description": "The application ID." },
            { "name": "novedadId", "description": "The unique identifier of the news item." }
          ]
        }
      },
      {
        "path": "artifacts/{appId}/public/data/config/{configId}",
        "definition": {
          "entityName": "config",
          "schema": {
            "$ref": "#/entities/config"
          },
          "description": "Stores configuration settings.",
          "params": [
            { "name": "appId", "description": "The application ID." },
            { "name": "configId", "description": "The unique identifier of the configuration." }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed for consistency and security. All application data, including user profiles, is stored under a unified path `artifacts/{appId}/public/data/{collection}`. This simplifies security rules, as a single set of wildcard rules can govern the entire data hierarchy. This structure ensures that all data is namespaced by the application ID, and security can be uniformly applied and managed."
  }
}
