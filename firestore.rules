
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // --- REGLAS DE EMERGENCIA ---
    // Permite a cualquier usuario AUTENTICADO leer y escribir en CUALQUIER colección.
    // Esto es para desbloquear el problema de creación de perfiles.
    // No es ideal para producción, pero es necesario para avanzar.
    match /{document=**} {
      allow read, write: if request.auth != null;
    }
  }
}
